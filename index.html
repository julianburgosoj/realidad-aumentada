<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Preconfigurada (MindAR)</title>
    <!-- Incluimos Tailwind CSS y nuestros estilos personalizados -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    
    <!-- Librerías de Realidad Aumentada y 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mindar-image@1.2.2/dist/mindar-image-aframe.prod.js"></script>
</head>
<body>

    <!--
        INSTRUCCIÓN: La escena AR ya está preconfigurada con las rutas a tus archivos.
        MindAR requiere una escena A-Frame que contenga la configuración de la cámara,
        los assets y la entidad target.
    -->
    <a-scene id="ar-scene"
        mindar-image="imageTargetSrc: ./target.mind; autoStart: false; filterMinCF:0.0001; filterBeta: 0.001;"
        embedded
        color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights: true"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">

        <!-- La cámara se desactiva inicialmente y se controla por MindAR -->
        <a-camera active="false" mindar-image-camera></a-camera>

        <a-assets>
            <!-- 
                1. ASSET DEL MODELO 3D (GLB)
                - id: identificador para referenciarlo en el target.
                - src: **IMPORTANTE** Define la ruta a tu archivo GLB. 
            -->
            <a-asset-item id="modelAsset" src="./model.glb"></a-asset-item>
            
            <!-- 
                2. ASSET DEL VIDEO (MP4) - SOLO SI LO NECESITAS
                - id: identificador para referenciarlo en el target.
                - src: **IMPORTANTE** Define la ruta a tu archivo MP4. 
                - autoplay, loop, muted, crossorigin: Configuración necesaria para video en A-Frame.
            -->
            <!-- 
            <video id="videoAsset" autoplay loop muted crossorigin="anonymous" src="./video.mp4"></video> 
            -->
        </a-assets>

        <!-- 
            ENTIDAD TARGET: Aquí se define qué aparece cuando se detecta la imagen.
            - targetIndex: 0 porque solo hay una imagen en target.mind
        -->
        <a-entity mindar-image-target="targetIndex: 0" id="ar-target">
            
            <!-- OPCIÓN A: Mostrar Modelo 3D 
                 Agregamos visible="false" para que NO se muestre hasta que el target sea detectado.
            -->
            <a-gltf-model rotation="90 0 0" position="0 0 0.1" scale="0.5 0.5 0.5" src="#modelAsset" visible="false">
            </a-gltf-model>

            <!-- OPCIÓN B: Mostrar Video/GIF (Comenta el modelo 3D y Descomenta esto) -->
            <!-- 
            <a-video src="#videoAsset" width="1" height="0.6" position="0 0 0.1" rotation="0 0 0" visible="false">
            </a-video> 
            -->
            
        </a-entity>
    </a-scene>

    <!-- Overlay de Instrucciones Iniciales -->
    <div id="loading-overlay">
        <div class="message-box">
            <h1 class="text-3xl font-extrabold mb-4 text-indigo-600">Realidad Aumentada Lista</h1>
            <p class="mb-6 text-gray-700 font-medium">
                Esta aplicación está configurada para cargar: 
                <code class="bg-gray-200 p-1 rounded">target.mind</code>, 
                <code class="bg-gray-200 p-1 rounded">model.glb</code>,
                y <code class="bg-gray-200 p-1 rounded">video.mp4</code> (Comentar/Descomentar en index.html)
            </p>
            <p class="text-sm mb-6 text-red-500">
                ⚠️ Asegúrate de que los archivos estén en la misma carpeta.
            </p>
            <button id="start-button" class="start-button">
                Toca para Iniciar la Cámara
            </button>
            <p id="error-message" class="text-red-600 mt-4 hidden"></p>
        </div>
    </div>

    <!-- Script de la aplicación -->
    <script src="script.js"></script>
</body>
</html>

